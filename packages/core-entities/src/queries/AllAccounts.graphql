query AllAccounts {
    accounts(
        first: 1000,
        where: { systemAccountType_in: [None, nToken, FeeReserve, SettlementReserve] }
    ) {
        id
        systemAccountType
        balances {
            token { 
                id
                underlying { id }
            }
            current {
                timestamp
                blockNumber
                currentBalance
                _accumulatedCostRealized
                adjustedCostBasis
                currentProfitAndLossAtSnapshot
                totalILAndFeesAtSnapshot
                totalProfitAndLossAtSnapshot
                totalInterestAccrualAtSnapshot
                impliedFixedRate
                adjustedNOTEEarned
                totalNOTEAccrued
            }
        }
        profitLossLineItems(
            first: 1000, orderBy: blockNumber, orderDirection: desc
        ) {
            timestamp
            blockNumber
            transactionHash { id }
            token { id tokenType }
            underlyingToken { id }
            tokenAmount
            bundle { bundleName }
            underlyingAmountRealized
            underlyingAmountSpot
            realizedPrice
            spotPrice
            impliedFixedRate
            isTransientLineItem
        }
    }
}